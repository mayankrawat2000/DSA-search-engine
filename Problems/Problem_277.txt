Given a cyclic array aa of size nn, where aiai is the value of aa in the ii-th position, there may be repeated values. Let us define that a permutation of aa is equal to another permutation of aa if and only if their values are the same for each position ii or we can transform them to each other by performing some cyclic rotation. Let us define for a cyclic array bb its number of components as the number of connected components in a graph, where the vertices are the positions of bb and we add an edge between each pair of adjacent positions of bb with equal values (note that in a cyclic array the first and last position are also adjacents).
Find the expected value of components of a permutation of aa if we select it equiprobably over the set of all the different permutations of aa.
